# S1 Landingzone Architecture

## Overview

This repository contains a Minimum Viable Architecture (MVA) designed for a **small customer** environment with tight cost constraints. The goal is to provide a secure, scalable, and operationally manageable environment while keeping the design lightweight and easy to maintain.

The solution implements a functional PoC of:

* Network Security Perimeter (NSP)
* Network Watcher + Traffic Analytics
* Diagnostics for NSGs + NSP
* Baseline Landing Zone structure
* Automation-first provisioning using IaC

---

## Why This Architecture?

Small customers often **cannot afford large-scale landing zones** or overly complex network designs. This PoC provides:

### ✔️ **Security by default**

* NSP providing environment boundary
* NSGs with diagnostics
* Optional traffic analytics for visibility

### ✔️ **Cost-controlled logging**

* Centralized LAW workspace
* Toggle-based diagnostics enabling (via YAML `is_diagnostics_enabled`)

### ✔️ **Simple network model**

* No Load Balancer (LB) unless explicitly required
* Minimal subnets + clearly defined roles

### ✔️ **Easy automation**

* Reusable terraform modules/azcli-yaml deploy scripts 
* Diagnostics grouped together for simple on/off

---

## Diagnostics Strategy

Diagnostics are centralized in a dedicated Bicep module. They are powered by the toggle:

```yaml
is_diagnostics_enabled: true
```

When enabled, the module configures:

* NSG diagnostic settings → LAW
* NSP diagnostic settings → LAW
* Network Watcher + Traffic Analytics

When disabled, the module skips all diagnostic deployments.

This allows you to **enable diagnostics during early visibility/PoC phases**, then **disable or tune them for production** to reduce cost.

---

## NSP (Network Security Perimeter)

Azure NSP provides:

* A cloud-native perimeter boundary
* Stronger isolation compared to NSGs alone
* Built-in support for PaaS services with private endpoints

This PoC uses NSP to demonstrate its value even for small customers. Production must include:

* Proper segmentation
* Identity hardening
* Complete perimeter policy sets

---

## Known Limitations (PoC Only)

* No production-grade microsegmentation
* No advanced threat detection (Defender for Cloud optional)
* Minimal routing + no custom UDR scenarios
* No HA/DR design

These will require additional design iterations.

---

## Summary

This PoC offers a **balanced, cost-optimized, security-focused architecture** suitable for demos or small customers. It provides:

* Architecture clarity
* Good trade-off between cost and visibility
* Ready-to-extend IaC foundation for later production builds

Use this as a starting point and evolve gradually as the customer’s needs and budget grow.
